---
layout: post
title: 破VPN引发的网络问题
categories:
- technology
tags:
- network
published: true
comments: true
---
<p><p>上个周末在家用VPN连上公司网络来写项目周报，公司的VPN系统会根据浏览器和操作系统来使用不同的VPN client. 很遗憾 mac下居然用的是一个applet，千辛万苦装上后能用了，中途出现CPU飙高的情况，我忍了，发完周报就把APPLET所在的网页关掉了，噩梦来了。</p>
<p> </p>
<p>上外网不能用了，ifconfig下出现两个VNIC的虚拟网卡且status为active。</p>
<p><img title="Screen Shot 2012-05-26 at 10.47.14 AM.png" src="http://www.lovelin.info/wp-content/uploads/2012/05/Screen-Shot-2012-05-26-at-10.47.14-AM.png" alt="Screen Shot 2012 05 26 at 10 47 14 AM" width="557" height="312" border="0" /></p>
<p>mtr 所有的外网域名都不通，只能ping 通自己的路由器192.168.1.1, 打印route table如下：</p>
<p><img title="Screen Shot 2012-05-26 at 10.13.18 AM.png" src="http://www.lovelin.info/wp-content/uploads/2012/05/Screen-Shot-2012-05-26-at-10.13.18-AM.png" alt="Screen Shot 2012 05 26 at 10 13 18 AM" width="600" height="248" border="0" /></p>
<p>按道理应该能ping通才对，换了个IPping了下，果然通了，断定为DNS解析的问题</p>
<p>打开网络设置，果然看到了DNS server被换成了公司的几个内网IP，于是加上一条192.168.1.1并置顶，OK了</p>
<p><img title="dns.jpg" src="http://www.lovelin.info/wp-content/uploads/2012/05/dns.jpg" alt="Dns" width="600" height="508" border="0" /></p>
<p>顺便鄙视下arraynetworks的mac VPN client</p></p>
