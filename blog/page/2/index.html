
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>黑皮窝</title>
  <meta name="author" content="gaojian">

  
  <meta name="description" content="我觉得用命令行的最大好处之一是可以像影碟一样录好后重放无数次.
每天的工作中，做code review是经常遇到的事情，怎样快速显示本分支的SVN变更.
尝试了几次后，如下一句即可，在此备忘下。 [cc lang=&#8221;python&#8221;]svn di -r `svn log -v &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.lovelin.info/blog/page/2/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="黑皮窝" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-28775026-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">黑皮窝</a></h1>
  
    <h2>technology, tips</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.lovelin.info" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/04/26/e4b880e8a18ce591bde4bba4reviewe4bba3e7a081e58f98e69bb4/">一行命令review代码变更</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-26T00:00:00+08:00" pubdate data-updated="true">Apr 26<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/04/26/e4b880e8a18ce591bde4bba4reviewe4bba3e7a081e58f98e69bb4/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><p style="font-size: 15px;">我觉得用命令行的最大好处之一是可以像影碟一样录好后重放无数次.</p>
<p style="font-size: 15px;">每天的工作中，做code review是经常遇到的事情，怎样快速显示本分支的SVN变更.</p>
<p style="font-size: 15px;">尝试了几次后，如下一句即可，在此备忘下。</p>
<p style="font-size: 15px;">
[cc lang=&#8221;python&#8221;]svn di -r `svn log -v &#8211;stop-on-copy | grep -B4 &#8220;svn copy&#8221; | head -1 | awk &#8216;{print substr($1, 2)}&#8217;`:HEAD[/cc]</p>
<p style="font-size: 15px;">做成alias或者写一句脚本，此后的review不用再每次找版本号找半天了.</p>
<p style="font-size: 15px;">PS: 什么是HEAD?</p>
<p style="font-size: 15px;">见<a href="http://en.wikipedia.org/wiki/Revision_control#Common_vocabulary">http://en.wikipedia.org/wiki/Revision_control#Common_vocabulary</a></p>
<p style="font-size: 15px;"> </p>
<p style="font-size: 15px;"> </p>
<p> </p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/04/06/e581a5e5bab7e5be88e9878de8a681efbc8dcrongrowle69da5e68f90e98692e68891e5969de6b0b4/">健康很重要－cron+growl来提醒我喝水</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-06T00:00:00+08:00" pubdate data-updated="true">Apr 6<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/04/06/e581a5e5bab7e5be88e9878de8a681efbc8dcrongrowle69da5e68f90e98692e68891e5969de6b0b4/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><h1 style="font-size: 14px;">背景</h1>
<p style="font-size: 14px;"><span style="font-size: 15px;">身为一名programmer，沉浸在自己的代码世界忽略其他是常有的事情。“山中无甲子,寒尽不知年”，猛一回头一个下午又过去了，今天又忘记喝水了，脸色又黄又油，小名都快由黑皮改为黄皮了，晚上回家被狠P了几句。</span></p>
<p style="font-size: 14px;">我需要一个助理，定时提醒我喝水，cron是UNIX世界的贴心管家，他总是准时按你的吩咐做事情。MAC下cron当然存在，但是没有了dbus notification，我们的管家叫哪位下人来通知我喝水呢？答案是growl.</p>
<h1 style="font-size: 14px;"></h1>
<h1 style="font-size: 14px;">执行</h1>
<p><span style="font-size: 15px;">我本机的growl的version是1.3.3，是自己download了源码compile出来的。默认安装时是没有装上growl notify工具的，所以第一步是准备好我们的growl notify.进入growl源码目录，growlnotify工具在 源码目录/Extras/growlnotify目录下，果断执行：</span></p>
[cc lang=&#8221;python&#8221;]<br />
make<br />
sudo make install<br />
[/cc]
<p style="font-size: 15px;">接下来再写个cron表达式，与linux下不同，在MAC下我试了好久都无法以crontab -e的方式加入表达式，最后直接编辑/etc/crontab文件，append如下内容</p>
[cc lang=&#8221;python&#8221;]<br />
0 10,15 * * * penggaojian /usr/local/bin/growlnotify -t &#8220;喝水啦&#8221; -m &#8220;`date` 到了&#8221; -s<br />
[/cc]
<p style="font-size: 15px;">效果就是每天的10点和15点，会pop一个提示窗出来. &#8220;-s&#8221;参数决定了如果我不手工关掉这个提醒，它就和我耗着不自动消失</p>
<p style="font-size: 15px;">搞定，收工。最终效果如图:</p>
<p style="font-size: 15px;"><img title="pop.jpg" src="http://www.lovelin.info/wp-content/uploads/2012/04/pop.jpg" border="0" alt="Pop" width="600" height="375" /></p>
<p style="font-size: 15px;">为什么是10点和15点？这是老婆她五舅这位营养师说的</p>
<p> </p>
<p> </p>
<p> </p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/29/e68da2e4b8aagtdefbc8dwunderliste8af95e794a8/">换个GTD－wunderlist试用</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-29T00:00:00+08:00" pubdate data-updated="true">Mar 29<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/03/29/e68da2e4b8aagtdefbc8dwunderliste8af95e794a8/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><div style="font-size: 16px;">对于我这种做事拖拉，并且无数想法间隙性从脑中涌现的人来说，GTD和笔记软件是不能少的。GTD一直以来都用着things,但是始终没找到android下的客户端，今天终于感觉到不爽了。比较N久，终于决定下个<a href="http://www.wunderlist.com/" title="wunderlist" target="_blank">wunderlist</a>来试用一下。</div>
<div style="font-size: 16px;"></div>
<div style="font-size: 16px;">选中wunderlist有如下原因：</div>
<div><ol>
<li><span style="font-size: 16px;">有android客户端，电脑手机一个都不能少</span></li>
<li><span style="font-size: 16px;">支持云端存储同步</span></li>
<li><span style="font-size: 16px;">Free!</span></li>
</ol>
<p> </p>
<p style="font-size: 18px;">总体感觉和things差不多，用list取代了things的project和area功能，与things相比，少了tag的概念</p>
<p style="font-size: 18px;"><img title="wunderlist.jpg" src="http://www.lovelin.info/wp-content/uploads/2012/03/wunderlist.jpg" border="0" alt="Wunderlist" width="600" height="376" /></p>
<p style="font-size: 18px;"><img title="desktop.jpg" src="http://www.lovelin.info/wp-content/uploads/2012/03/desktop1.jpg" border="0" alt="Desktop" width="600" height="375" /></p>
<p style="font-size: 18px;">附上原things的截图，方便对比</p>
<p style="font-size: 18px;"><img title="things.jpg" src="http://www.lovelin.info/wp-content/uploads/2012/03/things.jpg" border="0" alt="Things" width="600" height="411" /></p>
</div></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/27/e58f88e4b880e4bd8de58f8be4babae7a6bbe58ebb/">又一位友人离去</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-27T00:00:00+08:00" pubdate data-updated="true">Mar 27<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/03/27/e58f88e4b880e4bd8de58f8be4babae7a6bbe58ebb/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><p> </p>
<div style="font-size: 17px; font-family: 'Heiti SC';"><span style="font-family: Arial;">想起之前EDM的日子，你常常说要有颗大心脏，想不到你自己却倒在了阿喀琉斯之踵下。</span></div>
<div style="font-size: 17px; font-family: 'Heiti SC';"><span style="font-family: Arial;"><br /></span></div>
<div style="font-size: 17px; font-family: 'Heiti SC';"><span style="font-family: Arial;">“益者三友，友直友谅友多闻”，董董面面俱全。</span></div>
<div style="font-size: 17px; font-family: 'Heiti SC';"><span style="font-family: Arial;"><br /></span></div>
<div style="font-size: 17px; font-family: 'Heiti SC';"><span style="font-family: Arial;">
</span><div style="font-size: 17px; font-family: 'Heiti SC';">2年前，一根瘦竹竿，抱着台MBP成天在三楼和四楼间窜来窜去，我的阿里生涯由董导师拉开序幕－－－那么可以说，它拥有一个美好的开头。</div>
<br />
<div style="font-size: 17px; font-family: 'Heiti SC';">现在，一封邮件，故人远去，不得不感叹 &#8220;且夫天地为炉兮，造化为工！阴阳为炭兮，万物为铜！&#8221;。</div>
<br />
<div style="font-size: 17px;">又想起《双城记》中的那句话：</div>
<span style="color: #232323;">&#8220;</span><span style="color: #232323;">It was the best of times, it was the worst of times, it was the age of wisdom, it was the age of foolishness, it was the epoch of belief, it was the epoch of incredulity, it was the season of Light, it was the season of Darkness&#8230;&#8221;</span></div>
<div style="font-size: 17px; font-family: 'Heiti SC';"><span style="color: #232323; font-family: Verdana, Geneva, sans-serif;"><br /></span></div>
<div style="font-size: 17px; font-family: 'Heiti SC';"><span style="color: #232323; font-family: Verdana, Geneva, sans-serif;">相信未来。</span></div>
<div style="font-size: 17px; font-family: 'Heiti SC';"><span style="color: #232323; font-family: Verdana, Geneva, sans-serif;">相信董董有更好的未来。</span></div>
<div style="font-size: 17px; font-family: 'Heiti SC';"><span style="color: #232323; font-family: Verdana, Geneva, sans-serif;"><a title="View '送别' on Flickr.com" href="http://www.flickr.com/photos/76656507@N08/6876942914"><img title="送别" src="http://farm8.staticflickr.com/7241/6876942914_12387e689c_m.jpg" border="0" alt="送别" width="240" height="172" /></a></span></div>
<p> </p>
<p> </p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/24/e58886e69e90e697a5e5bf97e88eb7e58f96e4bbbbe58aa1e8bf90e8a18ce697b6e995bf/">分析日志获取任务运行时长</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-24T00:00:00+08:00" pubdate data-updated="true">Mar 24<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/03/24/e58886e69e90e697a5e5bf97e88eb7e58f96e4bbbbe58aa1e8bf90e8a18ce697b6e995bf/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近在做后台计算这块逻辑，所有的计算任务都在后台的线程池中运行。运行完所有任务后，如果统计每个任务的运行时长？所有任务的开始和结束都有打印日志（如下所示），只需要简单解析下日志文件即可。
<code>cat p4pnmas.log | grep task</code>
<a href="http://www.lovelin.info/wp-content/uploads/2012/03/Screen-Shot-2012-03-24-at-4.02.11-PM.png"><img src="http://www.lovelin.info/wp-content/uploads/2012/03/Screen-Shot-2012-03-24-at-4.02.11-PM.png" alt="" title="Screen Shot 2012-03-24 at 4.02.11 PM" width="795" height="38" class="alignnone size-full wp-image-159" /></a></p>

<p>我的第一念头是awk大法,步骤如下
<ul>	
<li>筛选出我感兴趣的标识任务启始结束的记录</li>
	<li>两两合并</li>
	<li>分析每行的两个时间戳，计算秒差</li></ul></p>

<p></p>

<p>于是写出如下句子
<code>awk '{if(match($0, /(task received|task completed)/))print}' p4pnmas.log <br />
|awk '{if(NR%2==1)printf("\n")}{printf "%s ", $0}END{printf("\n")}' <br />
|awk '{split($2,start,":");split($13,end,":");second=0;second+=int((end[1] - start[1]) * 3600);secode+=int((end[2] - start[2])*60);secode+=int(substr(end[3],1,2)-substr(start[3],1,2));print $11,second, int(substr(end[3],1,2)-substr(start[3],1,2)),"\n", $2, $13}'</code></p>

<p>写完后才发现有如下问题：
<ul>	
<li>多线程时，相邻的两行并不一定是某条任务的开始和结束</li>
<li>任务中途出现问题，并没有正常结束，于是后面的全部错位</li>
</ul></p>

<p>不想再伤脑筋用awk解决如上问题，果断python,拥有丰富的库，语法简单明了。python是在JAVA之余，我最喜欢用的脚本语言之一。<br />
思路如下：
<ul>	
<li>用map来保存中间状态，key为某条任务的标识</li>
<li>开始按条解析任务</li>
<li>如果分析出是某条任务的开始，以任务ID为key,时间戳为value,将元素放入map</li>
<li>如果分析出是某条任务的结束，在map中找到此任务的开始时间，如果没找到，打印error,如果找到，计算时间差，写入结果文件，从map中删除该元素</li>
	<li>分析完后，还剩在map中的元素为有头无尾的任务，打印error</li>
</ul></p>

<p>果然能正确分析出来所有的任务，因为分析时间比较长，觉得好玩再为其加上了一个console进度条<br />
整个程序如下：<br />
[cc lang=&#8221;python&#8221;]<br />
#!/usr/bin/python</p>

<p>import re<br />
import time<br />
import datetime<br />
import sys<br />
import os<br />
from progressbar import *</p>

<p>format=&#8221;%Y-%m-%d %H:%M:%S&#8221;<br />
startPattern = re.compile(&#8220;^(.*?),.*?task received, custId=(.*?)$&#8221;)<br />
endPattern = re.compile(&#8220;^(.*?),.*?task completed, custId=(.*?)$&#8221;)<br />
stack = {}</p>

<p>def printInfo(msg):<br />
    now = time.strftime(format,time.localtime(time.time()))<br />
    print &#8220;%s: %s&#8221; % (now, msg)</p>

<p>printInfo(&#8220;prepare to start&#8221;)</p>

<p>input = open(&#8220;p4pnmas.log&#8221;, &#8220;r&#8221;)<br />
ret = open(&#8220;ret&#8221;, &#8220;w&#8221;)</p>

<p>totalCount = 0<br />
for line in input:<br />
    totalCount += 1</p>

<p>count = 0<br />
widgets = [&#8216;Progress: &#8216;, Percentage(), &#8217; &#8216;, Bar(marker=RotatingMarker(&#8216;>-=&#8217;)),<br />
                   &#8217; &#8216;, ETA(), &#8217; &#8216;, Counter()]<br />
pbar = ProgressBar(widgets=widgets, maxval=totalCount).start()</p>

<p>printInfo(&#8220;start&#8221;)<br />
input.seek(0)<br />
for line in input:<br />
    count += 1<br />
    if count % 1000 == 0:<br />
        pbar.update(count)<br />
    m = startPattern.search(line)<br />
    if not m:<br />
        m = endPattern.search(line)<br />
        if not m:<br />
            continue<br />
        custId = m.group(2)<br />
        if not stack.has_key(custId):<br />
            print &#8220;unknown start time , custId=%s&#8221; % custId<br />
            continue<br />
        start=datetime.datetime.strptime(stack[custId],format)<br />
        end=datetime.datetime.strptime(m.group(1),format)<br />
        ret.write(&#8220;%s,%d\n&#8221; % (custId, (end-start).seconds))<br />
        del stack[custId]<br />
        continue<br />
    stack[m.group(2)] = m.group(1)<br />
pbar.finish()</p>

<p>if len(stack) > 0 :<br />
    print &#8220;the following cust has uncompleted:&#8221;<br />
    for key in stack.keys():<br />
        print key<br />
    <br />
input.close()<br />
ret.close()<br />
printInfo(&#8220;end&#8221;)<br />
[/cc]</p>

<p>运行效果如下图：
<a href="http://www.lovelin.info/wp-content/uploads/2012/03/Screen-Shot-2012-03-24-at-4.36.58-PM.png"><img src="http://www.lovelin.info/wp-content/uploads/2012/03/Screen-Shot-2012-03-24-at-4.36.58-PM.png" alt="" title="Screen Shot 2012-03-24 at 4.36.58 PM" width="597" height="75" class="alignnone size-full wp-image-175" /></a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/31/pythonchallengee4b893e9a298efbc8d4/">Pythonchallenge专题－4</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-31T00:00:00+08:00" pubdate data-updated="true">Jan 31<span>st</span>, 2012</time>
        
         | <a href="/blog/2012/01/31/pythonchallengee4b893e9a298efbc8d4/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><p>第4题地址 <a href="http://www.pythonchallenge.com/pc/def/equality.html" title="http://www.pythonchallenge.com/pc/def/equality.html">http://www.pythonchallenge.com/pc/def/equality.html</a></p></p>

<p><p>正如晓兵哥的口头禅所言，这道题中的5支蜡烛“闪瞎了我的一双钛合金狗眼”。<br />
读了好几遍题目，终于有点感觉了，意思是一个小写字母两边站3个大写字母，找出符合这种模式的字母即可,这时才发现页面中这张图片太贴切了。</p></p>

<p><p>字母呢？在html source code中！<br />
老办法，将源文件中的相关内容copy成一个文件&#8221;4-source.txt&#8221;
<a href="http://www.lovelin.info/wp-content/uploads/2012/01/Screen-Shot-2012-01-31-at-7.38.37-PM.png"><img src="http://www.lovelin.info/wp-content/uploads/2012/01/Screen-Shot-2012-01-31-at-7.38.37-PM.png" alt="" title="Screen Shot 2012-01-31 at 7.38.37 PM" width="677" height="276" class="alignnone size-full wp-image-140" /></a></p></p>

<p><p>祭起正则表达式，最终的代码如下<br />
[cc lang=&#8221;python&#8221;]<br />
import re<br />
f = open(&#8220;4-source.txt&#8221;, &#8220;r&#8221;)<br />
text = f.read()<br />
p = re.compile(&#8216;[^A-Z][A-Z]{3}[a-z][A-Z]{3}[^A-Z]&#8217;)<br />
list = p.findall(text) <br />
print &#8220;&#8221;.join([letters[4:5] for letters in list])<br />
f.close()<br />
[/cc]</p></p>

<p><p>中间有两次调整：<br />
1. 开始构造的pattern是&#8221;[A-Z]{3}[a-z][A-Z]{3}&#8221;,发现拿到的结果非常混乱，最后检查题目发现没有注意到
<a href="http://www.lovelin.info/wp-content/uploads/2012/01/Screen-Shot-2012-01-31-at-7.43.03-PM.png"><img src="http://www.lovelin.info/wp-content/uploads/2012/01/Screen-Shot-2012-01-31-at-7.43.03-PM.png" alt="" title="Screen Shot 2012-01-31 at 7.43.03 PM" width="616" height="26" class="alignnone size-full wp-image-141" /></a>
中的那个用大写来强调的单词&#8221;EXACTLY&#8221;.后面才改成了&#8221;[^A-Z][A-Z]{3}[a-z][A-Z]{3}[^A-Z]&#8221;</p></p>

<p><p>2.拿到的结果需要取出中间那个小写字母，连起来组成了一个单词&#8221;linkedlist&#8221;<br />
over.</p>
</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/05/pythonchallengee4b893e9a298efbc8d3/">Pythonchallenge专题－3</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-05T00:00:00+08:00" pubdate data-updated="true">Jan 5<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/01/05/pythonchallengee4b893e9a298efbc8d3/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>第3题地址<a href="http://www.pythonchallenge.com/pc/def/ocr.html" title="http://www.pythonchallenge.com/pc/def/ocr.html" target="_blank">http://www.pythonchallenge.com/pc/def/ocr.html</a>。<br />
不得不说这个URL非常巧妙，上一题是一个字母mapping相关的，URL中带上&#8221;map&#8221;做为题目的主题，&#8221;map&#8221;映射为&#8221;ocr&#8221;做为结果，而这一题看起来是图像识别相关的，所以&#8221;ocr&#8221;则可以成为本题的主题了。</p>

<p>看到这句话<br />
[cc lang=&#8221;bash&#8221;]recognize the characters. maybe they are in the book,<br />
but MAYBE they are in the page source.<br />
[/cc]<br />
知道玄机不在图片中，而在html源码中，于是打开页面源码，果然看到有提示<br />
[cc lang=&#8221;javascript&#8221;]
<!--<br>
find rare characters in the mess below:<br>
&#8211;></p>

<p><!--<br>
%%$@_$^__#)^)&!_+]!*@&^}@[@%]()%+$&[(_@%+%$*^@$^!+]!&_#)_*}{}}!}_]$[%}@[{_@#_^{*<br>
@##&{#&{&)*%(]{{([*}@[@&]+!!*{)!}{%+{))])[!^})+)$]#{*+^((@^@}$[**$&^{$!@#$%)!@(&<br>
&#8230;<br>
&#8211;>
[/cc]<br />
看来是需要从这段火星文中找出所有的字母就OK了。</p>

<p>将这段COPY出来，保存为一个文件&#8221;3-source.txt&#8221;，用python做如下运算<br />
[cc lang=&#8221;python&#8221;]<br />
import string</p>

<p>file = open(&#8220;3-source.txt&#8221;, &#8220;r&#8221;)<br />
ret = [char for char in file.read() if char in string.letters]<br />
print &#8220;&#8221;.join(ret)<br />
file.close()<br />
[/cc]</p>

<p>算得结果为“equality”，将此单词替换URL中的“ocr”,进入下一题。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/02/pythonchallengee4b893e9a298efbc8d2/">Pythonchallenge专题－2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-02T00:00:00+08:00" pubdate data-updated="true">Jan 2<span>nd</span>, 2012</time>
        
         | <a href="/blog/2012/01/02/pythonchallengee4b893e9a298efbc8d2/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>第2题地址<a href="http://www.pythonchallenge.com/pc/def/map.html" title="http://www.pythonchallenge.com/pc/def/map.html" target="_blank">http://www.pythonchallenge.com/pc/def/map.html</a></p>

<p>根据图片提示，可以判断这是一个简单的解密算法，将每个字母mapping到它的ascii值加2代表的字母就可以了。<br />
于是第一版本出来了<br />
[cc lang=&#8221;python&#8221;]<br />
str = &#8220;g fmnc wms bgblr rpylqjyrc gr zw fylb. rfyrq ufyr amknsrcpq ypc dmp. bmgle gr gl zw fylb gq glcddgagclr ylb rfyr&#8217;q ufw rfgq rcvr gq qm jmle. sqgle qrpgle.kyicrpylq() gq pcamkkclbcb. lmu ynnjw ml rfc spj.&#8221;</p>

<p>convertFun = lambda x : chr((ord(x) - 95) % 26 + 97)</p>

<p>plainStr = []<br />
for char in str:<br />
    if not (96 < ord(char) < 123):<br />
        plainStr.append(char)<br />
    else:<br />
        plainStr.append(convertFun(char))<br />
print &#8220;&#8221;.join(plainStr)</p>

<p>[/cc]<br />
期间发现翻译出来的文字还是有点问题，并不是之前想的ascii+2就可以了，而是一个头尾相连的环。比如字母&#8221;y&#8221;需要映射到字母&#8221;a&#8221;才正确。<br />
解密出来的结果是如下一段文字：<br />
[cc lang=&#8221;bash&#8221;]<br />
i hope you didnt translate it by hand. thats what computers are for. doing it in by hand is inefficient and that&#8217;s why this text is so long. using string.maketrans() is recommended. now apply on the url.<br />
[/cc]<br />
很显然，这暴露了我是一个python初学者，我根本不知道还有string.maketrans这样的现有的trans功能。<br />
查了下资料后，第2版的代码如下：<br />
[cc lang=&#8221;python&#8221;]<br />
import string</p>

<p>str = &#8220;g fmnc wms bgblr rpylqjyrc gr zw fylb. rfyrq ufyr amknsrcpq ypc dmp. bmgle gr gl zw fylb gq glcddgagclr ylb rfyr&#8217;q ufw rfgq rcvr gq qm jmle. sqgle qrpgle.kyicrpylq() gq pcamkkclbcb. lmu ynnjw ml rfc spj.&#8221;</p>

<p>table = string.maketrans(&#8220;abcdefghijklmnopqrstuvwxyz&#8221;, &#8220;cdefghijklmnopqrstuvwxyzab&#8221;)<br />
print string.translate(str, table)<br />
[/cc]<br />
打印出来的结果与上面的是一样的，不过代码就精简了很多了。<br />
现在的问题在于，我怎样才能进入下一关？？？像第一题一样把这段文字拷到url中替换某个关键词(map)，发现并不正确。<br />
根据提示将整个URL塞到解密函数中，“http”都转义了，明显也不对。<br />
无头苍蝇般瞎折腾了N久后，终于发现只将&#8221;map&#8221;这个关键词做一下mapping,得到&#8221;ocr&#8221;,将&#8221;ocr&#8221;替换掉&#8221;map&#8221;,进入下一题。</p>

<p>PS:<br />
如果不用python,直接在shell下用tr,更简单
<a href="http://www.lovelin.info/wp-content/uploads/2012/01/Screen-Shot-2012-01-02-at-10.54.16-AM.png"><img src="http://www.lovelin.info/wp-content/uploads/2012/01/Screen-Shot-2012-01-02-at-10.54.16-AM.png" alt="" title="tr result" width="652" height="131" class="alignnone size-full wp-image-110" /></a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/01/pythonchallengee4b893e9a298efbc8d1/">Pythonchallenge专题－1</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-01T00:00:00+08:00" pubdate data-updated="true">Jan 1<span>st</span>, 2012</time>
        
         | <a href="/blog/2012/01/01/pythonchallengee4b893e9a298efbc8d1/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.pythonchallenge.com/" title="pythonchallenge" target="_blank">pythonchallenge</a>听过很多次，今天决定开始试试.</p>

<p>打开<a href="http://www.pythonchallenge.com" title="www.pythonchallenge.com" target="_blank">www.pythonchallenge.com</a>，引导进入第一题。<br />
题目非常简单，求2的38次方<br />
直接<br />
[cc lang=&#8221;python&#8221;]<br />
print 2 ** 38<br />
[/cc]<br />
或
[cc lang=&#8221;python&#8221;]<br />
print 2 << 37<br />
[/cc]<br />
根据页面提示<br />
“Hint: try to change the URL address.”<br />
将算得的值替换进url中，进入下一题。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/12/31/e59ca8mace4b88ae5ae89e8a385mtr/">在mac上安装mtr</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-31T00:00:00+08:00" pubdate data-updated="true">Dec 31<span>st</span>, 2011</time>
        
         | <a href="/blog/2011/12/31/e59ca8mace4b88ae5ae89e8a385mtr/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>不得不说MAC下某些命令与常见的linux发行版中的命令大不一样。ps, sed 我忍很久了。</p>

<p>这次又发现没有<a href="http://www.bitwizard.nl/mtr/" title="mtr">mtr</a>工具，还好装了brew，于是
<a href="http://www.lovelin.info/wp-content/uploads/2011/12/Screen-Shot-2011-12-31-at-3.25.54-PM.png"><img src="http://www.lovelin.info/wp-content/uploads/2011/12/Screen-Shot-2011-12-31-at-3.25.54-PM.png" alt="" title="mtr install" width="678" height="78" class="alignnone size-full wp-image-90" /></a>
发现居然莫名地开始下载gtk+??</p>

<p>于是，决定挽袖子自己compile一个<br />
1.download并解压缩<br />
[cc lang=&#8221;bash&#8221;]<br />
wget ftp://ftp.bitwizard.nl/mtr/mtr-0.82.tar.gz<br />
tar xzvf mtr-0.82.tar.gz<br />
[/cc]<br />
2.编译<br />
[cc lang=&#8221;bash&#8221;]<br />
cd mtr-0.82<br />
./configure<br />
make<br />
sudo make install<br />
[/cc]<br />
发现装到/usr/local/bin/sbin下面去了。忘记configure时做prefix了<br />
3.此目录不在我的PATH范围内，所以在~/.profile文件中加入一句<br />
[cc lang=&#8221;bash&#8221;]<br />
echo &#8216;export PATH=/usr/local/bin/sbin:$PATH&#8217; >> ~/.profile<br />
source !$<br />
[/cc]<br />
4.使用<br />
[cc lang=&#8221;bash&#8221;]<br />
mtr www.alibaba.com<br />
[/cc]<br />
结果：
<a href="http://www.lovelin.info/wp-content/uploads/2011/12/Screen-Shot-2011-12-31-at-3.20.13-PM.png"><img src="http://www.lovelin.info/wp-content/uploads/2011/12/Screen-Shot-2011-12-31-at-3.20.13-PM.png" alt="" title="mtr result" width="639" height="240" class="alignnone size-full wp-image-94" /></a></p>

<p>PS：<br />
如果出现如下错误
<a href="http://www.lovelin.info/wp-content/uploads/2011/12/Screen-Shot-2012-01-02-at-9.36.30-AM.png"><img src="http://www.lovelin.info/wp-content/uploads/2011/12/Screen-Shot-2012-01-02-at-9.36.30-AM.png" alt="" title="mtr compile error" width="417" height="224" class="alignnone size-full wp-image-102" /></a>
先<br />
[cc lang=&#8221;bash&#8221;]<br />
export LIBS=&#8217;-lm -ltermcap -lresolv&#8217;<br />
[/cc]<br />
再执行编译即可</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/04/16/jiang-raspberry-pimu-lu-bei-fen-dao-dropbox/">将raspberry pi目录备份到dropbox</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/16/tmux-xia-wu-fa-zi-ding-yi-encodingde-jie-jue-fang-an/">tmux 下无法自定义encoding的解决方案</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/11/golangxie-ge-jian-dan-de-cmusge-ci-cha-jian/">golang写个简单的cmus歌词插件</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/03/17/ci-qu-jing-nian/">此去经年</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/22/shellban-de-xia-mei-zi-tu/">shell版的下妹子图</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/categories/golang'>golang (1)</a></li><li><a href='/blog/categories/linux'>linux (3)</a></li><li><a href='/blog/categories/other'>other (7)</a></li><li><a href='/blog/categories/raspberry-pi'>raspberry pi (1)</a></li><li><a href='/blog/categories/technology'>technology (20)</a></li><li><a href='/blog/categories/tips'>tips (13)</a></li></ul>
</section>







  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - gaojian -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'assassingj'; // required: replace example with your forum shortname
/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
 var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
 dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
 (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
 })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>








  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
